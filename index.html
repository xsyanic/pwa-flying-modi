<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flying Modi</title>
    <meta name="theme-color" content="#1E90FF">
    <meta name="description" content="Flappy Bird Clone, But It's Modi ji (by @xsyanic on GitHub)">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        user-select: none;
    }

    body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(to bottom, #87CEEB, #1E90FF);
        font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        overflow: hidden;
        padding: 20px;
    }

    #game-wrapper {
        position: relative;
        width: 100%;
        max-width: 360px;
        height: 640px;
        margin: 0 auto;
    }

    #loading-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, #1E90FF, #87CEEB);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 100;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
    }

    #loading-title {
        font-size: 36px;
        margin-bottom: 30px;
        color: #f1c40f;
        text-align: center;
    }

    #loading-container {
        width: 80%;
        max-width: 300px;
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        padding: 3px;
        margin-bottom: 20px;
    }

    #loading-bar {
        height: 20px;
        background: linear-gradient(to right, #f1c40f, #f39c12);
        border-radius: 8px;
        width: 0%;
        transition: width 0.3s ease;
    }

    #loading-text {
        font-size: 18px;
        margin-bottom: 10px;
    }

    #loading-details {
        font-size: 14px;
        margin-top: 10px;
        color: rgba(255, 255, 255, 0.8);
    }

    #game-container {
        position: relative;
        width: 100%;
        height: 100%;
        background-image: url('bg.png');
        background-size: cover;
        background-position: center;
        overflow: hidden;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        display: none;
    }

    /* Rest of your existing CSS remains the same until the media queries */

    @media (max-width: 480px) {
        body {
            padding: 10px;
            align-items: flex-start;
            padding-top: 20px;
        }
        
        #game-wrapper {
            width: 100%;
            height: auto;
            aspect-ratio: 9/16;
            max-height: 80vh;
        }
        
        #game-message {
            width: 90%;
            padding: 20px;
        }
        
        #game-message h1 {
            font-size: 32px;
        }
        
        #loading-title {
            font-size: 28px;
        }
        
        #social-buttons {
            top: 15px;
            right: 15px;
        }
        
        #game-over-image {
            width: 70%;
        }
        
        #credits {
            font-size: 12px;
            bottom: 15px;
        }
    }

    @media (max-height: 700px) and (max-width: 480px) {
        #game-wrapper {
            max-height: 85vh;
        }
    }

    @media (max-height: 600px) and (max-width: 480px) {
        #game-wrapper {
            max-height: 90vh;
        }
    }

    /* PWA specific styles */
    @media all and (display-mode: standalone) {
        body {
            padding: 0;
        }
        
        #game-wrapper {
            max-width: none;
            height: 100vh;
            border-radius: 0;
        }
        
        #game-container {
            border-radius: 0;
        }
        
        #loading-screen {
            border-radius: 0;
        }
    }
</style>
</head>
    <body>
    <div id="game-wrapper">
        <div id="loading-screen">
            <div id="social-buttons">
                <a href="https://github.com/xsyanic/pwa-flying-modi" target="_blank" class="social-button" id="github-button" title="Star on GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://instagram.com/syanicbhaii" target="_blank" class="social-button" id="instagram-button" title="Follow on Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
            <h1 id="loading-title">Flying Modi</h1>
            <p id="loading-text">0%</p>
            <div id="loading-container">
                <div id="loading-bar"></div>
            </div>
            <p id="loading-details">Preparing game assets...</p>
            <div id="credits">by @xsyanic on GitHub</div>
        </div>
        
        <div id="game-container">
            <button id="install-button" title="Install App"><i class="fas fa-download"></i></button>
            <div id="online-status" title="Online"></div>
            <div id="social-buttons">
                <a href="https://github.com/xsyanic/pwa-flying-modi" target="_blank" class="social-button" id="github-button" title="Star on GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://instagram.com/syanicbhaii" target="_blank" class="social-button" id="instagram-button" title="Follow on Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
            <div id="bird"></div>
            <div id="score">0</div>
            <div id="high-score">High Score: 0</div>
            <div id="game-message">
                <h1>Flying Modi</h1>
                <p>Tap or click to fly!</p>
                <p>Avoid the pipes and try to beat your high score!</p>
                <button id="start-button">Start Game</button>
            </div>
            <div id="game-over-screen">
                <img id="game-over-image" src="" alt="Game Over">
            </div>
            <div id="ground"></div>
            <div id="credits">by @xsyanic on GitHub</div>
        </div>
    </div>
    <script>
        // Game variables
        let gameStarted = false;
        let gameOver = false;
        let score = 0;
        let highScore = 0;
        let frames = 0;
        let pipeGap = 200;
        let pipeInterval = 110;
        let gravity = 0.4;
        let birdVelocity = 0;
        let birdJump = -7;
        let pipes = [];
        let pipePairs = [];
        let canRestart = false;
        let updateAvailable = false;
        let isOnline = navigator.onLine;
        
        // Asset loading variables
        let assetsLoaded = 0;
        let totalAssets = 0;
        let loadingComplete = false;

        // PWA variables
        let deferredPrompt;

        // DOM elements
        const loadingScreen = document.getElementById('loading-screen');
        const loadingBar = document.getElementById('loading-bar');
        const loadingText = document.getElementById('loading-text');
        const loadingDetails = document.getElementById('loading-details');
        const gameContainer = document.getElementById('game-container');
        const bird = document.getElementById('bird');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('high-score');
        const gameMessage = document.getElementById('game-message');
        const startButton = document.getElementById('start-button');
        const ground = document.getElementById('ground');
        const installButton = document.getElementById('install-button');
        const onlineStatus = document.getElementById('online-status');
        const gameOverScreen = document.getElementById('game-over-screen');
        const gameOverImage = document.getElementById('game-over-image');

        // Audio elements
        const flapSound = new Audio();
        const gameOverSound = new Audio();
        const backgroundMusic = new Audio();
        const highScoreSound = new Audio();

        [flapSound, gameOverSound, backgroundMusic, highScoreSound].forEach(audio => {
            audio.addEventListener('error', (e) => {
                console.error('Audio error:', e);
            });
        });
        
        // Set audio properties
        backgroundMusic.loop = true;
        backgroundMusic.volume = 0.5;
        flapSound.volume = 0.3;
        gameOverSound.volume = 0.7;
        highScoreSound.volume = 0.7;

        // Asset URLs
        const assetUrls = [
            'bird.png',
            'pipe_up.png',
            'pipe_down.png',
            'bg.png',
            'fly.mp3',
            'gameover.mp3',
            'music1.mp3',
            'music2.mp3',
            'music3.mp3',
            'music4.mp3',
            'highscore.mp3',
            'gameover.png',
            'highscore.png'
        ];

        // Asset names for display
        const assetNames = {
            'bird.png': 'Bird Image',
            'pipe_up.png': 'Top Pipe',
            'pipe_down.png': 'Bottom Pipe',
            'bg.png': 'Background',
            'fly.mp3': 'Flap Sound',
            'gameover.mp3': 'Game Over Sound',
            'music1.mp3': 'Background Music 1',
            'music2.mp3': 'Background Music 2',
            'music3.mp3': 'Background Music 3',
            'music4.mp3': 'Background Music 4',
            'highscore.mp3': 'High Score Sound',
            'gameover.png': 'Game Over Image',
            'highscore.png': 'High Score Image'
        };

        // URLs to cache for PWA
        const urlsToCache = [
            './',
            './index.html',
            './bg.png',
            './bird.png',
            './pipe_up.png',
            './pipe_down.png',
            './music1.mp3',
            './music2.mp3',
            './music3.mp3',
            './music4.mp3',
            './fly.mp3',
            './gameover.mp3',
            './highscore.mp3',
            './gameover.png',
            './highscore.png',
            './manifest.json',
            './sw.js',
            './icon.png'
        ];

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // PWA Install Prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
            
            installButton.addEventListener('click', () => {
                installButton.style.display = 'none';
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                });
            });
        });

        // Online/Offline status
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        function updateOnlineStatus() {
            isOnline = navigator.onLine;
            onlineStatus.style.display = 'block';
            
            if (isOnline) {
                onlineStatus.classList.remove('offline');
                onlineStatus.title = 'Online';
                
                // Check for updates when coming online
                setTimeout(checkForUpdates, 1000);
            } else {
                onlineStatus.classList.add('offline');
                onlineStatus.title = 'Offline';
            }
        }

        // Update checker
        async function checkForUpdates() {
            if (!isOnline) return;
            
            try {
                const cache = await caches.open('flying-modi-v1');
                const updatePromises = urlsToCache.map(async (url) => {
                    try {
                        const networkResponse = await fetch(url);
                        const cachedResponse = await cache.match(url);
                        
                        if (!cachedResponse) {
                            await cache.put(url, networkResponse.clone());
                            return { url, updated: true };
                        }
                        
                        const networkETag = networkResponse.headers.get('ETag');
                        const cachedETag = cachedResponse.headers.get('ETag');
                        
                        if (networkETag !== cachedETag) {
                            await cache.put(url, networkResponse.clone());
                            return { url, updated: true };
                        }
                        
                        return { url, updated: false };
                    } catch (error) {
                        console.log('Failed to check update for:', url);
                        return { url, updated: false };
                    }
                });
                
                const results = await Promise.all(updatePromises);
                const updatedFiles = results.filter(r => r.updated);
                
                if (updatedFiles.length > 0) {
                    console.log('Updated files:', updatedFiles);
                    showUpdateNotification();
                }
            } catch (error) {
                console.log('Update check failed:', error);
            }
        }

        function showUpdateNotification() {
            updateAvailable = true;
            const updateNotify = document.createElement('div');
            updateNotify.innerHTML = 'ðŸ”„ Update Available';
            updateNotify.style.cssText = `
                position: absolute;
                top: 60px;
                right: 20px;
                background: #f39c12;
                color: white;
                padding: 5px 10px;
                border-radius: 15px;
                font-size: 12px;
                cursor: pointer;
                z-index: 100;
            `;
            updateNotify.onclick = () => window.location.reload();
            gameContainer.appendChild(updateNotify);
        }

        // Cookie functions for high score storage
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Random music selection
        function getRandomMusic() {
            const musicFiles = ['music1.mp3', 'music2.mp3', 'music3.mp3', 'music4.mp3'];
            const randomIndex = Math.floor(Math.random() * musicFiles.length);
            return musicFiles[randomIndex];
        }

        // Asset loading functions
        async function loadAssets() {
            totalAssets = assetUrls.length;
            
            for (const url of assetUrls) {
                try {
                    if (isOnline) {
                        await loadAssetFromNetwork(url);
                    } else {
                        await loadAssetFromCache(url);
                    }
                } catch (error) {
                    // If network fails, try cache
                    try {
                        await loadAssetFromCache(url);
                    } catch (cacheError) {
                        console.error('Failed to load asset from both network and cache:', url);
                        assetError(url);
                    }
                }
            }
        }

        async function loadAssetFromNetwork(url) {
            return new Promise((resolve, reject) => {
                if (url.match(/\.(mp3|wav|ogg)$/)) {
                    // Create a temporary audio element to load and verify the sound
                    const audio = new Audio();
                    audio.addEventListener('canplaythrough', () => {
                        // Once loaded, assign to the correct global audio element
                        assignAudioToGlobalElement(url, audio.src);
                        assetLoaded(url);
                        resolve();
                    }, { once: true });
                    
                    audio.addEventListener('error', (e) => {
                        console.error('Error loading audio from network:', url, e);
                        reject();
                    }, { once: true });
                    
                    // Use cache busting to ensure fresh load
                    audio.src = url + '?t=' + Date.now();
                } else {
                    const img = new Image();
                    img.addEventListener('load', () => {
                        assetLoaded(url);
                        resolve();
                    }, { once: true });
                    img.addEventListener('error', () => {
                        console.error('Error loading image from network:', url);
                        reject();
                    }, { once: true });
                    img.src = url + '?t=' + Date.now();
                }
            });
        }

        async function loadAssetFromCache(url) {
            try {
                const cache = await caches.open('flying-modi-v1');
                const response = await cache.match(url);
                
                if (response) {
                    if (url.match(/\.(mp3|wav|ogg)$/)) {
                        const blob = await response.blob();
                        const objectUrl = URL.createObjectURL(blob);
                        
                        // Create audio element to verify the sound loads from cache
                        const audio = new Audio();
                        audio.addEventListener('canplaythrough', () => {
                            assignAudioToGlobalElement(url, objectUrl);
                            assetLoaded(url);
                        }, { once: true });
                        
                        audio.addEventListener('error', () => {
                            console.error('Error loading audio from cache:', url);
                            assetError(url);
                        }, { once: true });
                        
                        audio.src = objectUrl;
                    } else {
                        const blob = await response.blob();
                        const objectUrl = URL.createObjectURL(blob);
                        
                        // For images, update the CSS or element src
                        if (url.includes('bg.png')) {
                            gameContainer.style.backgroundImage = `url(${objectUrl})`;
                        } else if (url.includes('bird.png')) {
                            bird.style.backgroundImage = `url(${objectUrl})`;
                        }
                        // Note: pipe images are handled when pipes are created
                        // Game over images are handled when game over screen is shown
                        
                        assetLoaded(url);
                    }
                } else {
                    assetError(url);
                }
            } catch (error) {
                console.error('Error accessing cache:', error);
                assetError(url);
            }
        }   

        function assignAudioToGlobalElement(url, audioUrl) {
            if (url.includes('fly.mp3')) {
                flapSound.src = audioUrl;
                console.log('Assigned flap sound:', audioUrl);
            } else if (url.includes('gameover.mp3')) {
                gameOverSound.src = audioUrl;
                console.log('Assigned gameover sound:', audioUrl);
            } else if (url.includes('highscore.mp3')) {
                highScoreSound.src = audioUrl;
                console.log('Assigned highscore sound:', audioUrl);
            } else if (url.includes('music')) {
                // Music files are handled separately via getRandomMusic()
                console.log('Loaded music file:', url);
            }
        }

        function assetLoaded(url) {
            assetsLoaded++;
            const progress = Math.round((assetsLoaded / totalAssets) * 100);
            loadingBar.style.width = `${progress}%`;
            loadingText.textContent = `${progress}%`;
            loadingDetails.textContent = `Loaded: ${assetNames[url]}`;
            
            if (assetsLoaded === totalAssets) {
                loadingComplete = true;
                setTimeout(showGame, 1000);
            }
        }

        function assetError(url) {
            console.error(`Failed to load asset: ${url}`);
            assetsLoaded++;
            const progress = Math.round((assetsLoaded / totalAssets) * 100);
            loadingBar.style.width = `${progress}%`;
            loadingText.textContent = `${progress}%`;
            loadingDetails.textContent = `Error loading: ${assetNames[url]}`;
            
            if (assetsLoaded === totalAssets) {
                loadingComplete = true;
                setTimeout(showGame, 1000);
            }
        }

        function showGame() {
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                gameContainer.style.display = 'block';
                updateOnlineStatus();
            }, 500);
        }

        // Initialize game
        function init() {
            const savedHighScore = getCookie('flyingModiHighScore');
            if (savedHighScore !== null) {
                highScore = parseInt(savedHighScore);
                updateHighScoreDisplay();
            }
            
            bird.style.left = '50px';
            bird.style.top = '200px';
            
            startButton.addEventListener('click', startGame);
            gameContainer.addEventListener('click', handleJump);
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space') {
                    handleJump();
                }
            });
            
            gameContainer.addEventListener('touchstart', handleJump);
            gameOverScreen.addEventListener('click', handleRestart);
            
            loadAssets();
        }

        // Update high score display
        function updateHighScoreDisplay() {
            let medalClass = "";
            if (highScore >= 50) {
                medalClass = "gold";
            } else if (highScore >= 25) {
                medalClass = "silver";
            } else if (highScore >= 10) {
                medalClass = "bronze";
            }
            
            highScoreDisplay.innerHTML = `High Score: ${highScore}`;
            if (medalClass) {
                highScoreDisplay.innerHTML += ` <span class="medal ${medalClass}">â˜…</span>`;
            }
        }

        // Start the game
        function startGame() {
            if (gameStarted) return;
            
            gameStarted = true;
            gameOver = false;
            score = 0;
            frames = 0;
            pipes = [];
            pipePairs = [];
            
            bird.style.top = '200px';
            birdVelocity = 0;
            
            scoreDisplay.textContent = score;
            gameMessage.style.display = 'none';
            
            const randomMusicFile = getRandomMusic();
            backgroundMusic.src = randomMusicFile;
            backgroundMusic.currentTime = 0;
            backgroundMusic.play();
            
            gameLoop();
        }

        // Handle bird jump
        function handleJump() {
            if (!gameStarted) {
                startGame();
                return;
            }
            
            if (gameOver) {
                return;
            }
            
            birdVelocity = birdJump;
            flapSound.currentTime = 0;
            flapSound.play();
            
            bird.style.transform = 'rotate(-20deg)';
            setTimeout(() => {
                bird.style.transform = 'rotate(0deg)';
            }, 200);
        }

        // Handle restart after game over
        function handleRestart() {
            if (!canRestart || !gameOver) return;
            
            restartGame();
        }

        // Game loop
        function gameLoop() {
            if (gameOver) return;
            
            update();
            draw();
            
            frames++;
            requestAnimationFrame(gameLoop);
        }

        // Update game state
        function update() {
            birdVelocity += gravity;
            let birdTop = parseInt(bird.style.top);
            birdTop += birdVelocity;
            bird.style.top = birdTop + 'px';
            
            const birdBottom = birdTop + bird.offsetHeight;
            const groundTop = gameContainer.offsetHeight - ground.offsetHeight;
            
            if (birdTop <= 0 || birdBottom >= groundTop) {
                endGame();
                return;
            }
            
            if (frames % pipeInterval === 0) {
                createPipe();
            }
            
            for (let i = 0; i < pipes.length; i++) {
                let pipe = pipes[i];
                let pipeLeft = parseInt(pipe.style.left);
                
                pipeLeft -= 2;
                pipe.style.left = pipeLeft + 'px';
                
                if (pipeLeft < -60) {
                    pipe.remove();
                    pipes.splice(i, 1);
                    i--;
                    continue;
                }
                
                if (checkCollision(bird, pipe)) {
                    endGame();
                    return;
                }
            }
            
            for (let i = 0; i < pipePairs.length; i++) {
                let pair = pipePairs[i];
                let pipeLeft = parseInt(pair.top.style.left);
                
                if (pipeLeft + 60 < 50 && !pair.scored) {
                    pair.scored = true;
                    score++;
                    scoreDisplay.textContent = score;
                    
                    if (score % 10 === 0 && pipeInterval > 80) {
                        pipeInterval -= 2;
                    }
                }
            }
        }

        // Draw game elements
        function draw() {
            // CSS handles most rendering
        }

        // Create a new pipe
        function createPipe() {
            let minPipeHeight = 50;
            let maxPipeHeight = gameContainer.offsetHeight - pipeGap - 50 - minPipeHeight;
            
            let pipeTopHeight = Math.floor(Math.random() * (maxPipeHeight - minPipeHeight)) + minPipeHeight;
            let pipeBottomHeight = gameContainer.offsetHeight - pipeTopHeight - pipeGap - 50;
            
            let topPipe = document.createElement('div');
            topPipe.className = 'pipe pipe-top';
            topPipe.style.height = pipeTopHeight + 'px';
            topPipe.style.left = gameContainer.offsetWidth + 'px';
            gameContainer.appendChild(topPipe);
            pipes.push(topPipe);
            
            let bottomPipe = document.createElement('div');
            bottomPipe.className = 'pipe pipe-bottom';
            bottomPipe.style.height = pipeBottomHeight + 'px';
            bottomPipe.style.left = gameContainer.offsetWidth + 'px';
            bottomPipe.style.bottom = '50px';
            gameContainer.appendChild(bottomPipe);
            pipes.push(bottomPipe);
            
            pipePairs.push({
                top: topPipe,
                bottom: bottomPipe,
                scored: false
            });
        }

        // Check collision between bird and pipe
        function checkCollision(bird, pipe) {
            let birdRect = bird.getBoundingClientRect();
            let pipeRect = pipe.getBoundingClientRect();
            
            return !(
                birdRect.right < pipeRect.left + 5 ||
                birdRect.left > pipeRect.right - 5 ||
                birdRect.bottom < pipeRect.top + 5 ||
                birdRect.top > pipeRect.bottom - 5
            );
        }

        // End the game
        function endGame() {
            gameOver = true;
            backgroundMusic.pause();
            
            let newHighScore = false;
            if (score > highScore) {
                highScore = score;
                newHighScore = true;
                setCookie('flyingModiHighScore', highScore, 365);
                updateHighScoreDisplay();
                
                gameOverImage.src = 'highscore.png';
                highScoreSound.currentTime = 0;
                highScoreSound.play();
            } else {
                gameOverImage.src = 'gameover.png';
                gameOverSound.currentTime = 0;
                gameOverSound.play();
            }
            
            gameOverScreen.style.display = 'flex';
            
            setTimeout(() => {
                canRestart = true;
            }, 500);
        }

        // Restart the game
        function restartGame() {
            canRestart = false;
            
            gameOverSound.pause();
            gameOverSound.currentTime = 0;
            highScoreSound.pause();
            highScoreSound.currentTime = 0;
            
            gameOverScreen.style.display = 'none';
            
            pipes.forEach(pipe => pipe.remove());
            pipes = [];
            pipePairs = [];
            
            score = 0;
            scoreDisplay.textContent = score;
            
            pipeInterval = 110;
            
            gameOver = false;
            frames = 0;
            
            bird.style.top = '200px';
            birdVelocity = 0;
            
            const randomMusicFile = getRandomMusic();
            backgroundMusic.src = randomMusicFile;
            backgroundMusic.currentTime = 0;
            backgroundMusic.play();
            
            gameLoop();
        }

        // Initialize the game when page loads
        window.onload = init;
    </script>
</body>
</html>
